<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BrainRot Admin</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Lucida Console', monospace;
            background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #ff0000;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-card h3 {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd700;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .control-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: end;
            margin-bottom: 15px;
        }
        
        .control-btn {
            background: #ff0000;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Lucida Console';
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: #ff3333;
            transform: translateY(-2px);
        }
        
        .control-btn.danger {
            background: #dc3545;
        }
        
        .control-btn.success {
            background: #28a745;
        }
        
        input, select {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            font-family: 'Lucida Console';
        }
        
        .user-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin: 10px 0;
            border-radius: 12px;
            border-left: 4px solid #ff0000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .user-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .user-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #ffd700;
        }
        
        .user-id {
            color: #888;
            font-size: 0.9rem;
        }
        
        .user-rank {
            background: #ff0000;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
        }
        
        .user-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 8px;
        }
        
        .stat-label {
            color: #ff6b6b;
            font-size: 0.9rem;
        }
        
        .stat-value {
            font-weight: bold;
            color: white;
        }
        
        .editable-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            border: 1px dashed #ffd700;
            color: white;
            padding: 5px;
            border-radius: 4px;
            font-family: 'Lucida Console';
        }
        
        .user-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-family: 'Lucida Console';
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .edit-btn {
            background: #ffc107;
            color: black;
        }
        
        .save-btn {
            background: #28a745;
            color: white;
        }
        
        .delete-btn {
            background: #dc3545;
            color: white;
        }
        
        .search-box {
            margin-bottom: 20px;
        }
        
        .search-box input {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
        }
        
        .last-updated {
            color: #888;
            font-size: 0.8rem;
            margin-top: 5px;
        }
        
        .message {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
        }
        
        .message.success {
            background: rgba(40, 167, 69, 0.3);
            color: #28a745;
        }
        
        .message.error {
            background: rgba(220, 53, 69, 0.3);
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß† BRAINROT ADMIN PANEL</h1>
        
        <div class="admin-header">
            <div>
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <p>–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: <span id="totalUsersCount">0</span></p>
            </div>
            <div>
                <button class="control-btn" onclick="loadUsers()">–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                <button class="control-btn" onclick="goToGame()">–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∏–≥—Ä—É</button>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <h3>–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤</h3>
                <div class="stat-number" id="totalUsers">0</div>
            </div>
            <div class="stat-card">
                <h3>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å</h3>
                <div class="stat-number" id="totalBalance">0</div>
            </div>
            <div class="stat-card">
                <h3>–¢–æ–ø –∏–≥—Ä–æ–∫</h3>
                <div class="stat-number" id="topPlayer">-</div>
            </div>
            <div class="stat-card">
                <h3>–ú–∞–∫—Å. –±–∞–ª–∞–Ω—Å</h3>
                <div class="stat-number" id="maxBalance">0</div>
            </div>
        </div>
        
        <div class="controls">
            <h3 style="color: #ffd700; margin-bottom: 15px;">–ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h3>
            <div class="control-group">
                <input type="number" id="massBalance" placeholder="–ë–∞–ª–∞–Ω—Å –¥–ª—è –≤—Å–µ—Ö">
                <input type="number" id="massEnergy" placeholder="–≠–Ω–µ—Ä–≥–∏—è –¥–ª—è –≤—Å–µ—Ö">
                <select id="massAction">
                    <option value="set">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</option>
                    <option value="add">–î–æ–±–∞–≤–∏—Ç—å</option>
                    <option value="subtract">–í—ã—á–µ—Å—Ç—å</option>
                </select>
                <button class="control-btn success" onclick="applyToAll()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º</button>
            </div>
            
            <div class="control-group">
                <input type="number" id="addBalance" placeholder="–î–æ–±–∞–≤–∏—Ç—å –±–∞–ª–∞–Ω—Å">
                <input type="number" id="addEnergy" placeholder="–î–æ–±–∞–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é">
                <select id="targetUsers">
                    <option value="all">–í—Å–µ–º –∏–≥—Ä–æ–∫–∞–º</option>
                    <option value="top10">–¢–æ–ø-10 –∏–≥—Ä–æ–∫–∞–º</option>
                    <option value="bottom10">–ù–∏–∂–Ω–∏–º 10 –∏–≥—Ä–æ–∫–∞–º</option>
                </select>
                <button class="control-btn" onclick="addToSelected()">–î–æ–±–∞–≤–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–º</button>
            </div>
            
            <button class="control-btn danger" onclick="resetAllData()">–°–ë–†–û–°–ò–¢–¨ –í–°–ï –î–ê–ù–ù–´–ï</button>
        </div>
        
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏..." onkeyup="filterUsers()">
        </div>
        
        <div id="message" class="message"></div>
        
        <div id="usersList"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCiiSuG-XsE73TvTL2lHeIZ1w5PotlUTTY",
            authDomain: "brainrot-88434.firebaseapp.com",
            projectId: "brainrot-88434",
            storageBucket: "brainrot-88434.firebasestorage.app",
            messagingSenderId: "867519121615",
            appId: "1:867519121615:web:1e79d21a24776b13170fba"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        let allUsers = [];

        async function loadUsers() {
            try {
                showMessage('–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...', '');
                const snapshot = await db.collection('users').get();
                allUsers = [];
                let totalBalance = 0;
                let maxBalance = 0;
                let topPlayer = '';
                
                snapshot.forEach(doc => {
                    const data = doc.data();
                    const userData = {
                        id: doc.id,
                        username: data.username || 'Unknown',
                        balance: data.balance || 0,
                        energy: data.energy || 0,
                        lastUpdateTime: data.lastUpdateTime || Date.now(),
                        registeredAt: data.registeredAt,
                        lastUpdated: data.lastUpdated
                    };
                    
                    allUsers.push(userData);
                    totalBalance += userData.balance;
                    
                    if (userData.balance > maxBalance) {
                        maxBalance = userData.balance;
                        topPlayer = userData.username;
                    }
                });
                
                allUsers.sort((a, b) => (b.balance || 0) - (a.balance || 0));
                
                document.getElementById('totalUsers').textContent = allUsers.length;
                document.getElementById('totalUsersCount').textContent = allUsers.length;
                document.getElementById('totalBalance').textContent = totalBalance;
                document.getElementById('maxBalance').textContent = maxBalance;
                document.getElementById('topPlayer').textContent = topPlayer || '-';
                
                displayUsers(allUsers);
                showMessage(`–ó–∞–≥—Ä—É–∂–µ–Ω–æ ${allUsers.length} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π`, 'success');
                
            } catch (error) {
                console.error('Error loading users:', error);
                showMessage('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message, 'error');
            }
        }

        function displayUsers(users) {
            const usersList = document.getElementById('usersList');
            usersList.innerHTML = '';
            
            users.forEach((user, index) => {
                const userCard = document.createElement('div');
                userCard.className = 'user-card';
                userCard.innerHTML = `
                    <div class="user-header">
                        <div>
                            <div class="user-name">${user.username}</div>
                            <div class="user-id">ID: ${user.id} | –†–∞–Ω–≥: #${index + 1}</div>
                        </div>
                        <div class="user-rank">#${index + 1}</div>
                    </div>
                    
                    <div class="user-stats">
                        <div class="stat-item">
                            <div class="stat-label">Brainrot</div>
                            <input type="number" class="editable-input balance-input" value="${user.balance || 0}" 
                                   data-user-id="${user.id}" data-field="balance">
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–≠–Ω–µ—Ä–≥–∏—è</div>
                            <input type="number" class="editable-input energy-input" value="${user.energy || 0}" 
                                   data-user-id="${user.id}" data-field="energy">
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω</div>
                            <div class="stat-value">${user.registeredAt ? new Date(user.registeredAt.toDate()).toLocaleString() : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">–û–±–Ω–æ–≤–ª–µ–Ω</div>
                            <div class="stat-value">${user.lastUpdated ? new Date(user.lastUpdated.toDate()).toLocaleString() : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'}</div>
                        </div>
                    </div>
                    
                    <div class="last-updated">
                        –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${new Date(user.lastUpdateTime).toLocaleString()}
                    </div>
                    
                    <div class="user-actions">
                        <button class="action-btn save-btn" onclick="saveUserChanges('${user.id}')">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        <button class="action-btn edit-btn" onclick="quickEdit('${user.id}', 1000, 1000)">+1000 –∫–æ –≤—Å–µ–º—É</button>
                        <button class="action-btn edit-btn" onclick="quickEdit('${user.id}', 10000, 0)">+10000 Brainrot</button>
                        <button class="action-btn edit-btn" onclick="quickEdit('${user.id}', 0, 1000)">+1000 —ç–Ω–µ—Ä–≥–∏–∏</button>
                        <button class="action-btn edit-btn" onclick="setValues('${user.id}', 0, 1000)">–û–±–Ω—É–ª–∏—Ç—å Brainrot</button>
                        <button class="action-btn delete-btn" onclick="deleteUser('${user.id}', '${user.username}')">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
                usersList.appendChild(userCard);
            });
        }

        function filterUsers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const filteredUsers = allUsers.filter(user => 
                user.username.toLowerCase().includes(searchTerm)
            );
            displayUsers(filteredUsers);
        }

        async function saveUserChanges(userId) {
            const balanceInput = document.querySelector(`.balance-input[data-user-id="${userId}"]`);
            const energyInput = document.querySelector(`.energy-input[data-user-id="${userId}"]`);
            
            const newBalance = parseInt(balanceInput.value) || 0;
            const newEnergy = parseInt(energyInput.value) || 0;
            
            try {
                await db.collection('users').doc(userId).update({
                    balance: newBalance,
                    energy: newEnergy,
                    lastUpdateTime: Date.now(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showMessage(`–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId} —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!`, 'success');
                loadUsers(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + error.message, 'error');
            }
        }

        async function quickEdit(userId, balanceAdd, energyAdd) {
            try {
                const userDoc = await db.collection('users').doc(userId).get();
                const userData = userDoc.data();
                
                await db.collection('users').doc(userId).update({
                    balance: (userData.balance || 0) + balanceAdd,
                    energy: (userData.energy || 0) + energyAdd,
                    lastUpdateTime: Date.now(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showMessage(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${balanceAdd} Brainrot –∏ ${energyAdd} —ç–Ω–µ—Ä–≥–∏–∏`, 'success');
                loadUsers();
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ' + error.message, 'error');
            }
        }

        async function setValues(userId, balanceValue, energyValue) {
            try {
                await db.collection('users').doc(userId).update({
                    balance: balanceValue,
                    energy: energyValue,
                    lastUpdateTime: Date.now(),
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showMessage(`–ó–Ω–∞—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: Brainrot=${balanceValue}, –≠–Ω–µ—Ä–≥–∏—è=${energyValue}`, 'success');
                loadUsers();
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏–π: ' + error.message, 'error');
            }
        }

        async function deleteUser(userId, userName) {
            if (!confirm(`–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "${userName}"?`)) return;
            
            try {
                await db.collection('users').doc(userId).delete();
                showMessage(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "${userName}" —É–¥–∞–ª–µ–Ω`, 'success');
                loadUsers();
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: ' + error.message, 'error');
            }
        }

        async function applyToAll() {
            const balanceVal = document.getElementById('massBalance').value;
            const energyVal = document.getElementById('massEnergy').value;
            const action = document.getElementById('massAction').value;
            
            if (!balanceVal && !energyVal) {
                showMessage('–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è', 'error');
                return;
            }
            
            if (!confirm(`–ü—Ä–∏–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é "${action}" –∫–æ –≤—Å–µ–º ${allUsers.length} –∏–≥—Ä–æ–∫–∞–º?`)) return;
            
            try {
                const batch = db.batch();
                
                allUsers.forEach(user => {
                    const userRef = db.collection('users').doc(user.id);
                    const updateData = {};
                    
                    if (balanceVal) {
                        const balanceNum = parseInt(balanceVal);
                        const newBalance = action === 'set' ? balanceNum : 
                                         action === 'add' ? (user.balance || 0) + balanceNum :
                                         (user.balance || 0) - balanceNum;
                        updateData.balance = Math.max(0, newBalance);
                    }
                    
                    if (energyVal) {
                        const energyNum = parseInt(energyVal);
                        const newEnergy = action === 'set' ? energyNum : 
                                         action === 'add' ? (user.energy || 0) + energyNum :
                                         (user.energy || 0) - energyNum;
                        updateData.energy = Math.max(0, newEnergy);
                    }
                    
                    updateData.lastUpdateTime = Date.now();
                    updateData.lastUpdated = firebase.firestore.FieldValue.serverTimestamp();
                    batch.update(userRef, updateData);
                });
                
                await batch.commit();
                showMessage(`–û–ø–µ—Ä–∞—Ü–∏—è "${action}" –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –∫–æ –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º`, 'success');
                loadUsers();
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏: ' + error.message, 'error');
            }
        }

        async function addToSelected() {
            const balanceAdd = parseInt(document.getElementById('addBalance').value) || 0;
            const energyAdd = parseInt(document.getElementById('addEnergy').value) || 0;
            const target = document.getElementById('targetUsers').value;
            
            if (!balanceAdd && !energyAdd) {
                showMessage('–í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è', 'error');
                return;
            }
            
            let targetUsers = [];
            if (target === 'all') targetUsers = allUsers;
            else if (target === 'top10') targetUsers = allUsers.slice(0, 10);
            else if (target === 'bottom10') targetUsers = allUsers.slice(-10);
            
            if (!confirm(`–î–æ–±–∞–≤–∏—Ç—å ${balanceAdd} Brainrot –∏ ${energyAdd} —ç–Ω–µ—Ä–≥–∏–∏ ${targetUsers.length} –∏–≥—Ä–æ–∫–∞–º?`)) return;
            
            try {
                const batch = db.batch();
                
                targetUsers.forEach(user => {
                    const userRef = db.collection('users').doc(user.id);
                    const updateData = {
                        balance: (user.balance || 0) + balanceAdd,
                        energy: (user.energy || 0) + energyAdd,
                        lastUpdateTime: Date.now(),
                        lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                    };
                    batch.update(userRef, updateData);
                });
                
                await batch.commit();
                showMessage(`–ó–Ω–∞—á–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã ${targetUsers.length} –∏–≥—Ä–æ–∫–∞–º`, 'success');
                loadUsers();
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏: ' + error.message, 'error');
            }
        }

        async function resetAllData() {
            if (!confirm('–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) return;
            if (!confirm('–¢–æ—á–Ω–æ —É–¥–∞–ª–∏—Ç—å –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –í–°–ï –¥–∞–Ω–Ω—ã–µ? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å!')) return;
            
            try {
                const batch = db.batch();
                allUsers.forEach(user => {
                    const userRef = db.collection('users').doc(user.id);
                    batch.delete(userRef);
                });
                
                await batch.commit();
                showMessage('–í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–±—Ä–æ—à–µ–Ω—ã!', 'success');
                loadUsers();
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ —Å–±—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö: ' + error.message, 'error');
            }
        }

        function showMessage(text, type) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
            messageEl.className = `message ${type}`;
            messageEl.style.display = 'block';
            
            if (type === 'success') {
                setTimeout(() => {
                    messageEl.style.display = 'none';
                }, 3000);
            }
        }

        function goToGame() {
            window.location.href = 'game.html';
        }

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        loadUsers();
    </script>
</body>
</html>
